webpackJsonp([9],{14:function(t,e,r){"use strict";function n(t){return"[object Array]"===R.call(t)}function a(t){return"[object ArrayBuffer]"===R.call(t)}function o(t){return"undefined"!=typeof FormData&&t instanceof FormData}function s(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function i(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t){return void 0===t}function l(t){return null!==t&&"object"==typeof t}function p(t){return"[object Date]"===R.call(t)}function d(t){return"[object File]"===R.call(t)}function f(t){return"[object Blob]"===R.call(t)}function m(t){return"[object Function]"===R.call(t)}function h(t){return l(t)&&m(t.pipe)}function v(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function y(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function b(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||n(t)||(t=[t]),n(t))for(var r=0,a=t.length;r<a;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function _(){function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=_(e[r],t):e[r]=t}for(var e={},r=0,n=arguments.length;r<n;r++)b(arguments[r],t);return e}function w(t,e,r){return b(e,function(e,n){t[n]=r&&"function"==typeof e?x(e,r):e}),t}var x=r(147),R=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:a,isFormData:o,isArrayBufferView:s,isString:i,isNumber:u,isObject:l,isUndefined:c,isDate:p,isFile:d,isBlob:f,isFunction:m,isStream:h,isURLSearchParams:v,isStandardBrowserEnv:g,forEach:b,merge:_,extend:w,trim:y}},146:function(t,e,r){"use strict";function n(t,e){if(0===arguments.length)return null;var r=e||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"==(void 0===t?"undefined":u(t))?n=t:(10===(""+t).length&&(t=1e3*parseInt(t)),n=new Date(t));var a={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return r.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var r=a[e];return"a"===e?["一","二","三","四","五","六","日"][r-1]:(t.length>0&&r<10&&(r="0"+r),r||0)})}function a(t){return t.replace(/\s*/g,"")}function o(t,e){var r=arguments[1]||window.location.search.replace("&amp;","&"),n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=r.substr(r.indexOf("?")+1).match(n);return null!=a?a[2]:""}function s(t,e){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1}function i(t){var e=new RegExp("(^| )"+t+"(?:=([^;]*))?(;|$)"),r=document.cookie.match(e);return r?r[2]?unescape(r[2]):"":null}e.d=n,e.e=a,e.c=o,e.a=s,e.b=i;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}},147:function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},148:function(t,e,r){"use strict";(function(e){var n=r(14),a=r(158),o=r(160),s=r(161),i=r(162),u=r(149),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(163);t.exports=function(t){return new Promise(function(l,p){var d=t.data,f=t.headers;n.isFormData(d)&&delete f["Content-Type"];var m=new XMLHttpRequest,h="onreadystatechange",v=!1;if("test"===e.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in m||i(t.url)||(m=new window.XDomainRequest,h="onload",v=!0,m.onprogress=function(){},m.ontimeout=function(){}),t.auth){var y=t.auth.username||"",g=t.auth.password||"";f.Authorization="Basic "+c(y+":"+g)}if(m.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),m.timeout=t.timeout,m[h]=function(){if(m&&(4===m.readyState||v)&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in m?s(m.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?m.response:m.responseText,n={data:r,status:1223===m.status?204:m.status,statusText:1223===m.status?"No Content":m.statusText,headers:e,config:t,request:m};a(l,p,n),m=null}},m.onerror=function(){p(u("Network Error",t)),m=null},m.ontimeout=function(){p(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED")),m=null},n.isStandardBrowserEnv()){var b=r(164),_=(t.withCredentials||i(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;_&&(f[t.xsrfHeaderName]=_)}if("setRequestHeader"in m&&n.forEach(f,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete f[e]:m.setRequestHeader(e,t)}),t.withCredentials&&(m.withCredentials=!0),t.responseType)try{m.responseType=t.responseType}catch(t){if("json"!==m.responseType)throw t}"function"==typeof t.onDownloadProgress&&m.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){m&&(m.abort(),p(t),m=null)}),void 0===d&&(d=null),m.send(d)})}}).call(e,r(7))},149:function(t,e,r){"use strict";var n=r(159);t.exports=function(t,e,r,a){var o=new Error(t);return n(o,e,r,a)}},150:function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},151:function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},153:function(t,e,r){"use strict";(function(t){var n=r(154),a=r.n(n),o=r(68),s=(r.n(o),r(146)),i=a.a.create({baseURL:t.env.BASE_API,timeout:6e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}});i.interceptors.request.use(function(t){return t.headers["x-csrf-token"]=s.b("csrfToken"),t},function(t){console.log(t),Promise.reject(t)}),i.interceptors.response.use(function(t){var e=t.data.code;return"1601000014"==e||"1601000013"==e?(Object(o.Message)({message:t.data.msg,type:"error",duration:3e3}),location.replace("/login?redirect="+encodeURIComponent(location.href)),Promise.reject()):0!=e?(Object(o.Message)({message:t.data.msg,type:"error",duration:3e3}),t.data):t.data},function(t){return console.log("err"+t),Object(o.Message)({message:t.message,type:"error",duration:5e3}),Promise.reject(t)}),e.a=i}).call(e,r(7))},154:function(t,e,r){t.exports=r(155)},155:function(t,e,r){"use strict";function n(t){var e=new s(t),r=o(s.prototype.request,e);return a.extend(r,s.prototype,e),a.extend(r,e),r}var a=r(14),o=r(147),s=r(156),i=r(69),u=n(i);u.Axios=s,u.create=function(t){return n(a.merge(i,t))},u.Cancel=r(151),u.CancelToken=r(170),u.isCancel=r(150),u.all=function(t){return Promise.all(t)},u.spread=r(171),t.exports=u,t.exports.default=u},156:function(t,e,r){"use strict";function n(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var a=r(69),o=r(14),s=r(165),i=r(166),u=r(168),c=r(169);n.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(a,this.defaults,{method:"get"},t),t.baseURL&&!u(t.url)&&(t.url=c(t.baseURL,t.url));var e=[i,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},o.forEach(["delete","get","head"],function(t){n.prototype[t]=function(e,r){return this.request(o.merge(r||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){n.prototype[t]=function(e,r,n){return this.request(o.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=n},157:function(t,e,r){"use strict";var n=r(14);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},158:function(t,e,r){"use strict";var n=r(149);t.exports=function(t,e,r){var a=r.config.validateStatus;r.status&&a&&!a(r.status)?e(n("Request failed with status code "+r.status,r.config,null,r)):t(r)}},159:function(t,e,r){"use strict";t.exports=function(t,e,r,n){return t.config=e,r&&(t.code=r),t.response=n,t}},160:function(t,e,r){"use strict";function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var a=r(14);t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(a.isURLSearchParams(e))o=e.toString();else{var s=[];a.forEach(e,function(t,e){null!==t&&void 0!==t&&(a.isArray(t)&&(e+="[]"),a.isArray(t)||(t=[t]),a.forEach(t,function(t){a.isDate(t)?t=t.toISOString():a.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},161:function(t,e,r){"use strict";var n=r(14);t.exports=function(t){var e,r,a,o={};return t?(n.forEach(t.split("\n"),function(t){a=t.indexOf(":"),e=n.trim(t.substr(0,a)).toLowerCase(),r=n.trim(t.substr(a+1)),e&&(o[e]=o[e]?o[e]+", "+r:r)}),o):o}},162:function(t,e,r){"use strict";var n=r(14);t.exports=n.isStandardBrowserEnv()?function(){function t(t){var e=t;return r&&(a.setAttribute("href",e),e=a.href),a.setAttribute("href",e),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}var e,r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");return e=t(window.location.href),function(r){var a=n.isString(r)?t(r):r;return a.protocol===e.protocol&&a.host===e.host}}():function(){return function(){return!0}}()},163:function(t,e,r){"use strict";function n(){this.message="String contains an invalid character"}function a(t){for(var e,r,a=String(t),s="",i=0,u=o;a.charAt(0|i)||(u="=",i%1);s+=u.charAt(63&e>>8-i%1*8)){if((r=a.charCodeAt(i+=.75))>255)throw new n;e=e<<8|r}return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=a},164:function(t,e,r){"use strict";var n=r(14);t.exports=n.isStandardBrowserEnv()?function(){return{write:function(t,e,r,a,o,s){var i=[];i.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),n.isString(a)&&i.push("path="+a),n.isString(o)&&i.push("domain="+o),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},165:function(t,e,r){"use strict";function n(){this.handlers=[]}var a=r(14);n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){a.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},166:function(t,e,r){"use strict";function n(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var a=r(14),o=r(167),s=r(150),i=r(69);t.exports=function(t){return n(t),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=a.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),a.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||i.adapter)(t).then(function(e){return n(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(n(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},167:function(t,e,r){"use strict";var n=r(14);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},168:function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},169:function(t,e,r){"use strict";t.exports=function(t,e){return t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")}},170:function(t,e,r){"use strict";function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new a(t),e(r.reason))})}var a=r(151);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n(function(e){t=e}),cancel:t}},t.exports=n},171:function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},201:function(t,e,r){var n=r(45)(r(246),r(248),null,null,null);n.options.__file="/Users/chenchao/Documents/git_workspace/lego_manage/app/web/pages/act/list/listApp.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] listApp.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},246:function(t,e,r){"use strict";function n(t){var e=(new Date).getTime(),r=e-t;if(!(r<0)){var n=r/2592e6,a=r/6048e5,o=r/864e5,s=r/36e5,i=r/6e4;return n>=1?parseInt(n)+"月前":a>=1?parseInt(a)+"周前":o>=1?parseInt(o)+"天前":s>=1?parseInt(s)+"小时前":i>=1?parseInt(i)+"分钟前":"刚刚"}}function a(t){return Date.parse(t.replace(/-/gi,"/"))}Object.defineProperty(e,"__esModule",{value:!0});var o=r(247),s=r(146);e.default={data:function(){return{queryData:{act_id:"",act_name:"",act_channel:"",start_time:"",end_time:"",page:1,page_size:20,expire_time:""},opsLogsData:{source_id:"",type:0,user_id:""},dialogTestResultVisible:!1,tempActInfo:"",testResult:{results:"",remark:""},rules:{results:[{required:!0,message:"请选择测试结果",trigger:"change"}]},showSubRoute:!1,statusMap:{0:"新建活动",1:"审核中",2:"审核成功",3:"审核失败",4:"已发布",5:"内测"},statusMapNew:{0:"待测试",1:"测试中",2:"待审批",3:"审批中",4:"待发布",5:"已发布"},isAdmin:s.b("auths")&&s.b("auths").indexOf("0")>-1,isTester:s.b("auths")&&s.b("auths").indexOf("1")>-1,userAuths:s.b("auths"),userIds:s.b("user_id"),tableData:[],logData:{},listLoading:!0,total:0}},watch:{$route:function(t){this.showSubRoute="actList"!=t.name}},created:function(){this.showSubRoute="actList"!=this.$route.name,this.showSubRoute||this.queryFilterList(!0)},methods:{queryFilterList:function(t){var e=this;this.listLoading=!0,o.a(this.queryData).then(function(r){e.listLoading=!1;var n=e;if(0==r.code){r.data.data.forEach(function(t){t.isTestOwner=s.a(t.tests,n.userIds),t.isRevisability=s.a(t.revisability,n.userIds),t.pageids=t.page_ids?t.page_ids.join("-"):""}),e.tableData=r.data.data,e.timestamp=new Date(1e3*r.data.timestamp),t&&(e.total=1*r.data.sum,e.queryData.page=1)}})},getOpsLogs:function(t,e){var r=this;return this.opsLogsData.source_id=t.act_id,!!e.some(function(e,r){return e.act_id==t.act_id})&&(!this.logData[t.act_id]&&(o.b(this.opsLogsData).then(function(e){0==e.code&&r.$set(r.logData,t.act_id,e.data),r.logData[t.act_id].forEach(function(e,o){r.logData[t.act_id][o].changeTime=n(a(e.opt_time))})}),void o.c({act_id:t.act_id}).then(function(e){0==e.code&&(r.$set(t,"showList",e.data),console.log(t))})))},manual:function(t){var e=this;o.d({act_id:t.act_id}).then(function(t){0==t.code?e.$alert("同步到集成环境成功"):e.$message.error(json.msg)})},handleCurrentChange:function(t){this.queryData.page=t,this.queryFilterList(!1)},filterStatusText:function(t){return this.statusMapNew[t.status]},deadlineNotify:function(t){var e=new Date(t.expire_time);return Math.abs(e-this.timestamp)<864e5?t.expire_time+"<br/><p class='textcenter' style='color: #ff2200;'>即将过期</p>":t.expire_time},addNewAct:function(){},sortTableByColum:function(){},submitTest:function(t){var e=this;o.e({act_id:t.row.act_id,action:"initiateTest"}).then(function(t){0==t.code&&e.$message({message:"转测成功，请通知相关人员测试！",type:"success"})})},showTestResultDialog:function(t){this.dialogTestResultVisible=!0,this.tempActInfo=t},toPublish:function(t){var e=this;o.e({act_id:t.row.act_id,action:"publish"}).then(function(t){0==t.code&&e.$message({message:"发布成功！",type:"success"})})},submitApprove:function(t){var e=this;o.e({act_id:t.row.act_id,action:"initiateApprove"}).then(function(t){0==t.code&&e.$message({message:"提交审批成功，请通知相关人员审批！",type:"success"})})},submitTestResult:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var r="";r=0==e.testResult.results?"passTest":"refuseTest",o.e({act_id:e.tempActInfo.row.act_id,action:r,remark:e.testResult.remark}).then(function(t){0==t.code&&e.$message({message:"测试结果提交成功！",type:"success"})}),e.dialogTestResultVisible=!1})},resetTestResut:function(t){this.$refs[t].resetFields(),this.dialogTestResultVisible=!1}}}},247:function(t,e,r){"use strict";function n(t){return Object(u.a)({url:"/act/getActs",method:"post",data:t})}function a(t){return Object(u.a)({url:"/act/UpdateActStatus",method:"post",data:t})}function o(t){return Object(u.a)({url:"/common/GetOptLogs",method:"post",data:t})}function s(t){return Object(u.a)({url:"/ActivitySynConf/manual",method:"post",data:t})}function i(t){return Object(u.a)({url:"/ActParam/do",method:"post",data:t})}e.a=n,e.e=a,e.b=o,e.d=s,e.c=i;var u=r(153)},248:function(t,e,r){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.showSubRoute?r("router-view"):r("div",{staticClass:"martop20"},[r("el-form",{attrs:{inline:!0,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"活动名："}},[r("el-input",{attrs:{placeholder:"按活动名查询"},model:{value:t.queryData.act_name,callback:function(e){t.$set(t.queryData,"act_name",e)},expression:"queryData.act_name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"活动渠道："}},[r("el-input",{attrs:{placeholder:"按活动渠道查询"},model:{value:t.queryData.act_channel,callback:function(e){t.$set(t.queryData,"act_channel",e)},expression:"queryData.act_channel"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"活动号："}},[r("el-input",{attrs:{placeholder:"按活动号查询"},model:{value:t.queryData.act_id,callback:function(e){t.$set(t.queryData,"act_id",e)},expression:"queryData.act_id"}})],1)],1),t._v(" "),r("el-form",{attrs:{inline:!0,"label-width":"90px"}},[r("el-form-item",{attrs:{label:"到期时间："}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-mm-dd HH:mm:ss",placeholder:"活动到期时间"},model:{value:t.queryData.expire_time,callback:function(e){t.$set(t.queryData,"expire_time",e)},expression:"queryData.expire_time"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"创建时间："}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-mm-dd HH:mm:ss",placeholder:"活动创建时间"},model:{value:t.queryData.create_time,callback:function(e){t.$set(t.queryData,"create_time",e)},expression:"queryData.create_time"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"结束时间："}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-mm-dd HH:mm:ss",placeholder:"活动结束时间"},model:{value:t.queryData.end_time,callback:function(e){t.$set(t.queryData,"end_time",e)},expression:"queryData.end_time"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.queryFilterList(!0)}}},[t._v("查询")]),t._v(" "),r("el-button",{attrs:{type:"success"}},[r("router-link",{attrs:{to:{name:"newAct"}}},[r("i",{staticClass:"glyphicon glyphicon-plus"}),t._v("新增活动")])],1)],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.tableData,stripe:"",border:"","highlight-current-row":""},on:{"sort-change":t.sortTableByColum,"expand-change":t.getOpsLogs}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary"}},[r("a",{staticClass:"btnchains",attrs:{target:"_blank",href:"chain.html?act_id="+e.row.act_id+"&status="+e.row.status}},[t._v("副本模板 "),r("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),r("el-button",{attrs:{type:"primary"}},[r("a",{staticClass:"btnchains",attrs:{target:"_blank",href:"chain.html?tplflag=realtpl&act_id="+e.row.act_id+"&status="+e.row.status}},[t._v("正式模板 "),r("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),r("el-table",{staticClass:"ui-mt-20",attrs:{data:[e.row],stripe:"",border:"","highlight-current-row":""}},[r("el-table-column",{attrs:{prop:"act_channel",label:"活动投放渠道","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"url",label:"活动地址","show-overflow-tooltip":"","min-width":"200"}}),t._v(" "),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),t._v(" "),r("el-table-column",{attrs:{prop:"creator_name",label:"创建人"}})],1),t._v(" "),r("el-table",{staticClass:"ui-mt-20",attrs:{data:e.row.showList,stripe:"",border:"","highlight-current-row":""}},[r("el-table-column",{attrs:{prop:"cmd",label:"cmd"}}),t._v(" "),r("el-table-column",{attrs:{prop:"code",label:"code"}}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"name"}}),t._v(" "),r("el-table-column",{attrs:{prop:"p_code",label:"p_code"}}),t._v(" "),r("el-table-column",{attrs:{prop:"type",label:"type"}}),t._v(" "),r("el-table-column",{attrs:{prop:"p_name",label:"p_name"}}),t._v(" "),r("el-table-column",{attrs:{prop:"p_value",label:"p_value"}})],1),t._v(" "),r("div",{staticStyle:{"margin-top":"30px"}},[r("el-steps",{attrs:{direction:"vertical",space:"80px",active:1}},t._l(t.logData[e.row.act_id],function(e,n){return r("el-step",{key:n,attrs:{size:"small",icon:"el-icon-info"},scopedSlots:t._u([{key:"default",fn:function(n){return r("span",{},[t._v(t._s(e.description))])}}])})}))],1)]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"act_id",label:"活动号",width:"120"}}),t._v(" "),r("el-table-column",{attrs:{prop:"crypt",label:"加密号",width:"120"}}),t._v(" "),r("el-table-column",{attrs:{prop:"act_title","show-overflow-tooltip":"",label:"活动名"}}),t._v(" "),r("el-table-column",{attrs:{prop:"effect_time",label:"生效时间"}}),t._v(" "),r("el-table-column",{attrs:{label:"过期时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.deadlineNotify(e.row)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"status",label:"活动状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("b",{staticClass:"color-success"},[t._v(t._s(t.filterStatusText(e.row)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{width:"130",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-dropdown",{attrs:{size:"small"},scopedSlots:t._u([{key:"default",fn:function(n){return r("el-dropdown-menu",{},[r("el-dropdown-item",[r("router-link",{attrs:{to:{name:"actEdit",params:{act_id:e.row.act_id,status:e.row.status}}}},[t._v("编辑活动")])],1),t._v(" "),r("el-dropdown-item",{attrs:{divided:""}},[r("router-link",{attrs:{to:{name:"chainEdit",params:{act_id:e.row.act_id,status:e.row.status}}}},[t._v("规则配置")])],1),t._v(" "),r("el-dropdown-item",{attrs:{divided:""}},[r("div",{on:{click:function(r){t.manual(e.row)}}},[t._v("同步配置")])]),t._v(" "),"1"==e.row.is_lego?r("el-dropdown-item",{attrs:{divided:""}},[r("a",{attrs:{href:"http://172.16.1.10:3001/interpage.html?page_id="+e.row.pageids+"&act_id="+e.row.crypt}},[t._v("编辑页面")])]):t._e(),t._v(" "),0==e.row.status&&(e.row.creator==t.userIds||t.isAdmin||e.row.isRevisability)?r("el-dropdown-item",{attrs:{divided:""}},[r("el-button",{attrs:{type:"info"},on:{click:function(r){t.submitTest(e)}}},[t._v("转测试")])],1):t._e(),t._v(" "),1==e.row.status&&t.isTester&&e.row.isTestOwner?r("el-dropdown-item",{attrs:{divided:""}},[r("el-button",{attrs:{type:"info"},on:{click:function(r){t.showTestResultDialog(e)}}},[t._v("提交测试结果")])],1):t._e(),t._v(" "),2==e.row.status&&(e.row.creator==t.userIds||t.isAdmin||e.row.isRevisability)?r("el-dropdown-item",{attrs:{divided:""}},[r("el-button",{attrs:{type:"info"},on:{click:function(r){t.submitApprove(e)}}},[t._v("提交审批")])],1):t._e(),t._v(" "),6==e.row.status&&(e.row.creator==t.userIds||t.isAdmin||e.row.isRevisability)?r("el-dropdown-item",{attrs:{divided:""}},[r("el-button",{attrs:{type:"info"},on:{click:function(r){t.toPublish(e)}}},[t._v("发布")])],1):t._e()],1)}}])},[r("span",{staticClass:"el-dropdown-link color-primary",staticStyle:{"font-size":"12px"}},[t._v("\n              操作菜单"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})])])]}}])})],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"ui-mt-20 ui-ta-r"},[r("el-pagination",{attrs:{"current-page":t.queryData.page,"page-size":t.queryData.page_size,div:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.queryData,"page",e)}}})],1),t._v(" "),r("el-dialog",{attrs:{title:"测试结果",visible:t.dialogTestResultVisible},on:{"update:visible":function(e){t.dialogTestResultVisible=e}},scopedSlots:t._u([{key:"default",fn:function(e){return r("span",{staticClass:"dialog-footer"},[r("el-button",{on:{click:function(e){t.resetTestResut("testResult")}}},[t._v("暂不提交")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitTestResult("testResult")}}},[t._v("确认提交")])],1)}}])},[r("el-form",{ref:"testResult",attrs:{model:t.testResult,rules:t.rules}},[r("el-form-item",{attrs:{label:"选择测试结果:",required:"",prop:"results"}},[r("el-radio-group",{model:{value:t.testResult.results,callback:function(e){t.$set(t.testResult,"results",e)},expression:"testResult.results"}},[r("el-radio",{attrs:{label:"0"}},[t._v("测试通过")]),t._v(" "),r("el-radio",{attrs:{label:"1"}},[t._v("测试不通过")])],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"测试结果说明:"}},[r("el-input",{model:{value:t.testResult.remark,callback:function(e){t.$set(t.testResult,"remark",e)},expression:"testResult.remark"}})],1)],1)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},69:function(t,e,r){"use strict";(function(e){function n(t,e){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a=r(14),o=r(157),s=/^\)\]\}',?\n/,i={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=r(148):void 0!==e&&(t=r(148)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(n(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)?(n(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(s,"");try{t=JSON.parse(t)}catch(t){}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(t){u.headers[t]={}}),a.forEach(["post","put","patch"],function(t){u.headers[t]=a.merge(i)}),t.exports=u}).call(e,r(7))}});