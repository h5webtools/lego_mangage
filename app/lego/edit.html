<!DOCTYPE html>
<html style="font-size: 50px;">

<head>
    <meta charset="utf-8" />
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="0">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>加油宝页面配置平台</title>
    <link href="css/new/home.css" rel="stylesheet" type="text/css">
    <link href="css/jqcalendar.css" rel="stylesheet" type="text/css">
    <link href="css/new/edit.css" rel="stylesheet" type="text/css">
    <link href="css/new/edit.template.1.css" rel="stylesheet" type="text/css">
    <link href="css/new/component.css" rel="stylesheet" type="text/css">
    <style>
        .colorFrameInput {
            margin-left: 12px;
        }
        .form-radio {
            font-size: 14px;
        }
        .mod-iframe-container {
            padding: 0px;
            background-color: #f1f0f0;
            max-width: 1500px;
            border-radius: 0px;
        }
        .iframe-close {
            position: fixed;
            left: 1270px;
            top: 10px;
        }
        iframe {
            width: 1300px;
            height: 700px;
        }
    </style>
    <style>
        .popupSet {
            display: blodk;
        }
        .rightOperation a.btn.bi {
            background-image: url(./image/icon_bi.png);
        }

        .rightOperation a.btn.bi.done {
            background-image: url(./image/icon_bi_cur.png);
        }
        .form-group .must:before {
            content: '*';
            color: red;
        }
        .form-ninegrid {
            margin-left: 70px !important;
        }
    </style>
    <script>
        (function (w, r) {
            w['waObjectName'] = r;
            w[r] = w[r] || function () {
                for (var i = 0; i < arguments.length; i++) {
                    // 拷贝数据对象
                    if (typeof arguments[i] === 'object') {
                        arguments[i] = JSON.parse(JSON.stringify(arguments[i]));
                    }
                }
                (w[r].q = w[r].q || []).push(arguments);
            };
            w[r].l = 1 * new Date();
        })(window, 'wa');
    </script>
    <script type="text/javascript">
        window.MPM_EDIT = true; //vue一些组件，在MPM中会做特殊处理，例如数据不缓存
        window._componentConfig = [];
        //线上页面会用到，这里列举出了全部的线上可用全局参数，线上页面会把前置数据拉取完再初始化页面，这里先把数据写死
        window.pageConfig = {
        };
        window.LegoPageConfig = {
            isPower: 0
        }

        window.trace = function (count) {
            var caller = arguments.callee.caller;
            var i = 0;
            count = count || 10;
            console.log("***----------------------------------------  ** " + (i + 1));
            while (caller && i < count) {
                console.error(caller.toString());
                caller = caller.caller;
                i++;
                console.error("***---------------------------------------- ** " + (i + 1));
            }
        }
        window.onerror = function (err) {
            console.error(err);
            window.trace(100);
        }
    </script>

</head>
<body class="mpmedit_body">
    <script type="text/javascript">
        (function () {
            var arr = navigator.userAgent.match(/chrome\/(\d+)/i);
            if (!arr || arr.length == 2 && arr[1] < 60) {
                document.write('<div class="popupSet"><p style="text-align:center;font-size:20px;width:100%;">' + (arr ? '您当前浏览器版本过低，将导致部分内容无法编辑，请先升级浏览器，升级完重启浏览器后再打开此页面进行编辑' : '您当前浏览器不是chrome，可能部分内容无法编辑，请先安装chrome浏览器,然后用chrome打开此页面进行编辑') + '!<br><a style="font-size:25px;font-weight:bold;color:red" href="http://rj.baidu.com/soft/detail/14744.html?ald">' + (arr ? ' 点此进行升级!' : ' 点此进行下载！') + '</a></p></div>');
                return;
            }
        })();
    </script>

    <!-- iframe -->
    <div id="divComponentIframe" class="popupSet" style="display:none">
        <div class="publishConfigBody mod-iframe-container" id="divIframe">
            <div class="iframe-close" id="iframe-close">
                <img src="http://images.jyblife.com//lego/close.png" />
            </div>
            <iframe src=""></iframe>
        </div>
    </div>
    <!-- iframe -->

    <div id="divComponentEdit" class="popupSet" style="display:none;">
        <!-- 弹窗设置 开始 -->
        <div class="publishConfigBody" id="divBasicInfoSet">

            <form class="form-horizontal">
                <div class="formArea">
                    <h3 class="formAreaHeader">基本设置</h3>
                    <div class="form-group">
                        <label class="must">页面模板：</label>
                        <select id="selectPageType">
                            <option value="1">通用模板</option>
                            <option value="2">可分享模板</option>
                            <option value="3" >支付模板</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="must">活动名称：</label>
                        <input type="text" name="" id="inputPageName" placeholder="最少3个字符">
                        <!--<em class="inputTips">最少3个字符</em>-->
                    </div>
                    <div class="form-group">
                        <label class="must">页面路径：</label>
                        <select id="selectPagePath">
                            <option value="0">选择路径</option>
                            <option value="https://cdn.jyblife.com/act/pagemaker/">act</option>
                        </select>
                        <em class="inputTips">*注意：保存后不可更改</em>
                    </div>
                    <div class="form-group">
                        <label class="must">目录名称：</label>
                        <input type="text" name="" id="inputPageMenu" placeholder="如:starbucks0510">
                        <em class="inputTips">*只能使用字母，数字，下划线，注意：保存后不可更改</em>
                    </div>
                    <div class="form-group">
                        <label>老链接迁移：</label>
                        <input type="text" name="" size="40" id="inputOldPageMenu" placeholder="如:201701/gaodehuafei/pay.html">
                        <em class="inputTips">*日期+目录名+文件名称</em>
                    </div>
                </div>
                <!-- 过期时间设置 -->
                <div class="formArea">
                    <h3 class="formAreaHeader">过期时间设置</h3>
                    <div class="form-group">
                        <label class="must">过期时间：</label>
                        <input type="text" value="" id="expireTime" class="time" readonly placeholder="页面过期时间">
                    </div>
                    <div class="form-group">
                        <label>过期跳转：</label>
                        <input type="text" value="" class="url" id="expireUrl" style="width:450px" placeholder="页面过期跳转链接">
                    </div>
                </div>
                <!-- 过期时间设置 -->
                <!-- 分享设置 -->
                <div class="formArea">
                    <h3 class="formAreaHeader" id="shareInfoControl">分享设置(仅选择分享模板才可使用)</h3>
                    <div id="divShareInfoSet" style="display:none;">
                        <div class="form-group">
                            <label class="must">分享图片：</label>
                            <div class="fileButton">
                                <div class="uploadBtn"></div>
                                <div class="fileMask">+
                                    <br>上传图片</div>>
                            </div>
                            <img class="preview" src="" alt="预览图片">
                            <br>
                            <em class="inputTips">上传图片大小不要超过10KB</em>
                        </div>
                        <div class="form-group">
                            <label class="must">分享图片：</label>
                            <input type="text" name="" id="textShareImgUrl">
                        </div>
                        <div class="form-group">
                            <label class="must">分享标题：</label>
                            <input type="text" name="" id="textShareTitle">
                        </div>
                        <div class="form-group">
                            <label class="control-label must">分享描述：</label>
                            <input type="text" name="" id="textShareDesc">
                        </div>
                    </div>
                </div>
                <!-- 分享设置 -->

                <div class="text-center btnGroupFooter">
                    <button class="jc-btn btn-primary" type="button" id="basicInfoSaveBtn">保存</button>
                    <button class="jc-btn btn-default" type="button" id="basicInfoCancelBtn">取消</button>
                </div>

            </form>
        </div>
        <!-- 弹窗设置 开始 -->
        <!--E 页面路径，名称等基本设置-->

        <!--S 分享标题、描述、图片-->
        <div class="setting share">
            <div class="textCenter">
                <input type="button" value="保存" id="shareInfoSaveBtn">
                <input type="button" value="取消" id="shareInfoCancelBtn">
            </div>
        </div>
        <!--E 分享标题、描述、图片-->

        <!--S 背景色等设置-->
        <div class="publishConfigBody" id="divOtherExtraSet">
            <form class="form-horizontal">
                <div class="formArea">
                    <h3 class="formAreaHeader">其他</h3>
                    <div class="form-group">
                        <label>背景色：</label>
                        <input type="color" class="color">
                        <input type="text" value="" class="color" style="width:66px" placeholder="#ffffff">
                    </div>
                    <div class="form-group" style="display:none">
                        <label>背景色渐变：</label>
                        <input type="color" class="colorto">
                        <input type="text" value="" class="colorto" style="width:66px" placeholder="#ffffff">
                    </div>
                </div>
        
        <!--S 背景色等设置-->
        <div class="text-center btnGroupFooter">
                <button class="jc-btn btn-primary" type="button" id="otherExtraSaveBtn">保存</button>
                <button class="jc-btn btn-default" type="button" id="otherExtraCancelBtn">取消</button>
            </div>
        </form>
    </div>
    <div class="setting" id="divNameSet" style="text-align: center;min-width: 300px;width: 300px;">
        <dl>
            <dt id="divNameSetTitle">模块名称设置</dt>
        </dl>
        <dl>
            <dt>模块名称</dt>
            <dd>
                <input type="text" value="" class="url" style="width:140px" id="divSetNewName">
            </dd>
        </dl>
        <div class="textCenter">
            <input type="button" value="确定" id="divNameSetSaveBtn">
            <input type="button" value="取消" id="divNameSetCancelBtn">
        </div>
    </div>
    </div>
    <div class="homeTopHead editTopHead">
        <a href="home.html" class="sysName" style="color:#fff;font-weight:normal">加油宝活动配置平台</a>
        <a href="pagelist.html" target="_blank" style="color:#fff">我的活动</a>
    </div>
    <!--顶部菜单-->
    <div class="topMenu" id="divTopMenu">
        <a href="javascript:;" id="basicInfoBtn"><img src="image/icon_infoedit.png"><span>基本信息</span></a>
        <a href="javascript:;" id="otherExtraBtn"><img src="image/icon_other.png"><span>其他</span></a>
        <a href="javascript:;" id="savePageBtn"><img src="image/icon_save.png"><span>保存页面</span></a>
        <a href="javascript:;" class="previews" id="previewBtn"><img class="previews" src="image/icon_view.png"><span class="previews">预览</span></a>
        <a href="javascript:;" class="prepublishs" id="prePublishBtn"><img class="prepublishs" src="image/icon_checkpub.png"><span class="prepublishs">预发布</span></a>
        <a href="javascript:;" class="publishs" style="display:none" id="publishBtn"><img class="publishs" src="image/icon_publish.png"><span class="publishs">发布</span></a>
    </div>
    <!--顶部菜单-->
    <!--左侧组件区-->
    <div id="divLeftComList" class="leftComList">
        <template v-if="true">
            <div v-for="itemparent in list" class="group open">
                <div class="groupName"><span>{{itemparent.des}}</span>
                    <a href="javascript:;"></a>
                </div>
                <div class="list">
                    <div v-for="item in itemparent.val" class="com" draggable="true" :mid="item.path_key" :componentkey="item.id" :title="item.tb_desc">
                        <div class="comIcon">
                            <img :mid="item.path_key" :componentkey="item.id" :title="item.tb_desc" :src="item.tb_thumb">
                        </div>
                        <span class="comName">{{item.tb_name}}</span>
                    </div>
                </div>
            </div>
        </template>
    </div>
    <!--左侧组件区-->
    <!--组件配置区-->
    <div class="divComponentSetPanelOuter">
        <div class="divComponentSetPanel" id="divComponentSetPanel">
            <!--各组件设置面板放进这里-->
        </div>
    </div>
    <!--组件配置区-->
    <!--右侧结构图-->
    <div class="rightOperation" id="divOperation">
        <div id="divOperationItemList"></div>
    </div>
    <!--右侧结构图-->
    <!--实时预览区-->
    <div id="wrapper">
        <div class="editPage" id="divEditingPage" style="overflow-x: hidden;padding:0 2px;">
            <div class="emptyTip">从左侧拖动组件到此</div>
        </div>
    </div>
    <div class="markLineIphone6">iphone6首屏高度</div>
    <!--实时预览区-->
    <!-- 选择子组件浮层 -->
    <div id="popListBox" class="modal" v-show="showFlag" style="display:none;">
        <div class="modal-dialog component-dialog">
            <div class="modal-body">
                <div v-for="itemparent in list" class="component-group">
                    <h3>{{itemparent.des}}</h3>
                    <ul>
                        <li @click="select(item)" v-for="item in itemparent.val" :mid="item.path_key" :componentkey="item.id" :title="item.tb_desc">
                            <div>
                                <img :mid="item.path_key" :componentkey="item.id" :title="item.tb_desc" :src="item.tb_thumb">
                            </div>
                            <p>{{item.tb_name}}</p>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="jc-btn" @click="hide">取消</button>
            </div>
        </div>
    </div>
    <!-- E选择子组件浮层 -->

    <script type="text/javascript" src="js/lib/sea.js"></script>
    <script type="text/javascript" src="js/lib/seajs-text.js"></script>

    <script type="text/javascript">
        seajs.use('./js/mpm.sys.edit.dev.js?v=20171029', function (m) {
            console.log("dev entrance 0");
            m.main()
            console.log("dev entrance 2");
        });
    </script>
</body>

</html>