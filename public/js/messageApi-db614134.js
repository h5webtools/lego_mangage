!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/public/",t(t.s=317)}({245:function(e,t,n){"use strict";(function(e){var n="application/x-postmate-v1+json",r=Object.prototype.hasOwnProperty,i=0,o=function(){return++i},a=function(){var e;return h.debug?(e=console).log.apply(e,arguments):null},s=function(e){var t=document.createElement("a");t.href=e;var n=t.protocol.length>4?t.protocol:window.location.protocol,r=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||n+"//"+r},c=function(e,t){return e.origin===t&&("object"==typeof e.data&&("postmate"in e.data&&(e.data.type===n&&!!{"handshake-reply":1,call:1,emit:1,reply:1,request:1}[e.data.postmate])))},d=function(e,t){var n="function"==typeof e[t]?e[t]():e[t];return h.Promise.resolve(n)},l=function(){function t(t){var n=this;this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.events={},"production"!==e.env.NODE_ENV&&(a("Parent: Registering API"),a("Parent: Awaiting messages...")),this.listener=function(t){var r=((t||{}).data||{}).value||{},i=r.data,o=r.name;"emit"===t.data.postmate&&("production"!==e.env.NODE_ENV&&a("Parent: Received event emission: "+o),o in n.events&&n.events[o].call(n,i))},this.parent.addEventListener("message",this.listener,!1),"production"!==e.env.NODE_ENV&&a("Parent: Awaiting event emissions from Child")}var r=t.prototype;return r.get=function(e){var t=this;return new h.Promise(function(r){var i=o(),a=function e(n){n.data.uid===i&&"reply"===n.data.postmate&&(t.parent.removeEventListener("message",e,!1),r(n.data.value))};t.parent.addEventListener("message",a,!1),t.child.postMessage({postmate:"request",type:n,property:e,uid:i},t.childOrigin)})},r.call=function(e,t){this.child.postMessage({postmate:"call",type:n,property:e,data:t},this.childOrigin)},r.on=function(e,t){this.events[e]=t},r.destroy=function(){"production"!==e.env.NODE_ENV&&a("Parent: Destroying Postmate instance"),window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)},t}(),u=function(){function t(t){var r=this;this.model=t.model,this.parent=t.parent,this.parentOrigin=t.parentOrigin,this.child=t.child,"production"!==e.env.NODE_ENV&&(a("Child: Registering API"),a("Child: Awaiting messages...")),this.child.addEventListener("message",function(t){if(c(t,r.parentOrigin)){"production"!==e.env.NODE_ENV&&a("Child: Received request",t.data);var i=t.data,o=i.property,s=i.uid,l=i.data;if("call"===t.data.postmate)return void(o in r.model&&"function"==typeof r.model[o]&&r.model[o].call(r,l));d(r.model,o).then(function(e){return t.source.postMessage({property:o,postmate:"reply",type:n,uid:s,value:e},t.origin)})}})}return t.prototype.emit=function(t,r){"production"!==e.env.NODE_ENV&&a('Child: Emitting Event "'+t+'"',r),this.parent.postMessage({postmate:"emit",type:n,value:{name:t,data:r}},this.parentOrigin)},t}(),h=function(){function t(e){var t=e.container,n=void 0===t?void 0!==n?n:document.body:t,r=e.model,i=e.url;return this.parent=window,this.frame=document.createElement("iframe"),n.appendChild(this.frame),this.child=this.frame.contentWindow||this.frame.contentDocument.parentWindow,this.model=r||{},this.sendHandshake(i)}return t.prototype.sendHandshake=function(r){var i,o=this,d=s(r),u=0;return new t.Promise(function(t,s){var h=function n(r){return!!c(r,d)&&("handshake-reply"===r.data.postmate?(clearInterval(i),"production"!==e.env.NODE_ENV&&a("Parent: Received handshake reply from Child"),o.parent.removeEventListener("message",n,!1),o.childOrigin=r.origin,"production"!==e.env.NODE_ENV&&a("Parent: Saving Child origin",o.childOrigin),t(new l(o))):("production"!==e.env.NODE_ENV&&a("Parent: Invalid handshake reply"),s("Failed handshake")))};o.parent.addEventListener("message",h,!1);var p=function(){u++,"production"!==e.env.NODE_ENV&&a("Parent: Sending handshake attempt "+u,{childOrigin:d}),o.child.postMessage({postmate:"handshake",type:n,model:o.model},d),5===u&&clearInterval(i)},m=function(){p(),i=setInterval(p,500)};o.frame.attachEvent?o.frame.attachEvent("onload",m):o.frame.onload=m,"production"!==e.env.NODE_ENV&&a("Parent: Loading frame",{url:r}),o.frame.src=r})},t}();h.debug=!1,h.Promise=function(){try{return window?window.Promise:Promise}catch(e){return null}}(),h.Model=function(){function t(e){return this.child=window,this.model=e,this.parent=this.child.parent,this.sendHandshakeReply()}return t.prototype.sendHandshakeReply=function(){var t=this;return new h.Promise(function(i,o){var s=function s(c){if(c.data.postmate){if("handshake"===c.data.postmate){"production"!==e.env.NODE_ENV&&a("Child: Received handshake from Parent"),t.child.removeEventListener("message",s,!1),"production"!==e.env.NODE_ENV&&a("Child: Sending handshake reply to Parent"),c.source.postMessage({postmate:"handshake-reply",type:n},c.origin),t.parentOrigin=c.origin;var d=c.data.model;if(d){for(var l=Object.keys(d),h=0;h<l.length;h++)r.call(d,l[h])&&(t.model[l[h]]=d[l[h]]);"production"!==e.env.NODE_ENV&&a("Child: Inherited and extended model from Parent")}return"production"!==e.env.NODE_ENV&&a("Child: Saving Parent origin",t.parentOrigin),i(new u(t))}return o("Handshake Reply Failed")}};t.child.addEventListener("message",s,!1)})},t}(),t.a=h}).call(t,n(6))},317:function(e,t,n){"use strict";function r(){this.styleElement=null,this.scriptElement=null,this.headElement=document.getElementsByTagName("head")[0],this.bodyElement=document.body,this.handshake=null,this.init()}Object.defineProperty(t,"__esModule",{value:!0});var i=n(245);r.prototype.init=function(){this.createPostmateModel(),this.emitEvent()},r.prototype.removeElement=function(e,t){e&&t&&e.removeChild(t)},r.prototype.appendToHead=function(e,t){t&&this.removeElement(this.headElement,this.styleElement),this.headElement&&(this.styleElement=e,this.headElement.appendChild(e))},r.prototype.appendToBody=function(e,t){t&&this.removeElement(this.bodyElement,this.scriptElement),this.bodyElement&&(this.scriptElement=e,this.bodyElement.appendChild(e))},r.prototype.createPostmateModel=function(){var e=this;this.handshake=new i.a.Model({refresh:function(){window.location.reload()},injectStyle:function(t){var n=document.createElement("style");n.innerHTML=t.code,e.appendToHead(n,!0)},evalFunc:function(t){var n=document.createElement("script");n.innerHTML=e.wrapperScriptCode(t.code),e.appendToBody(n,!0)}})},r.prototype.emitEvent=function(){this.handshake&&this.handshake.then(function(e){e.emit("get-component-config",JSON.stringify(window._componentConfig))})},r.prototype.wrapperScriptCode=function(e){return"try { "+e+" } catch (e) { alert(e.toString()); }"},new r},6:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function a(){f&&p&&(f=!1,p.length?m=p.concat(m):v=-1,m.length&&s())}function s(){if(!f){var e=i(a);f=!0;for(var t=m.length;t;){for(p=m,m=[];++v<t;)p&&p[v].run();v=-1,t=m.length}p=null,f=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function d(){}var l,u,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var p,m=[],f=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||f||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=d,h.addListener=d,h.once=d,h.off=d,h.removeListener=d,h.removeAllListeners=d,h.emit=d,h.prependListener=d,h.prependOnceListener=d,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}}});